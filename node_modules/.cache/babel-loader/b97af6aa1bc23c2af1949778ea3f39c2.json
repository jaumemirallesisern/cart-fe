{"ast":null,"code":"import { initialState } from './model';\nimport * as Actions from './actions';\n\nconst productsListReducer = (state = initialState, action) => {\n  console.log(`Reducer`);\n  console.log(action.type);\n\n  switch (action.type) {\n    case Actions.FETCH_PRODUCTSLIST_REQUEST:\n      console.log(`Request triggered`);\n      return { ...state,\n        loading: true,\n        error: false\n      };\n\n    case Actions.FETCH_PRODUCTSLIST_SUCCESS:\n      console.log(`Received data: ${action.data}`);\n      return { ...state,\n        loading: false,\n        error: false,\n        elements: action.data\n      };\n\n    case Actions.FETCH_PRODUCTSLIST_FAILURE:\n      return { ...state,\n        loading: false,\n        error: true\n      };\n\n    case Actions.INCREMENT_COUNTER:\n      let copyCarti = state.cart;\n      console.log(copyCarti);\n      const ii = copyCarti.findIndex(e => e.id === action.id);\n\n      if (ii === -1) {\n        copyCarti.push({\n          id: action.id,\n          qty: 1,\n          name: action.name,\n          customerPrice: action.customerPrice,\n          cost: action.cost\n        });\n      } else {\n        copyCarti[ii].qty = copyCarti[ii].qty + 1;\n      }\n\n      ;\n      console.log(copyCarti);\n      const cartQty = copyCarti.reduce((acc, value) => acc + value.qty, 0);\n      return { ...state,\n        loading: false,\n        error: true,\n        cart: copyCarti,\n        cartCounter: cartQty\n      };\n\n    case Actions.DECREMENT_COUNTER:\n      let copyCartd = state.cart;\n      const di = copyCartd.findIndex(e => e.id === action.id);\n\n      if (di === -1) {} else {\n        if (copyCartd[di].qty > 0) {\n          copyCartd[di].qty = copyCartd[di].qty - 1;\n        }\n\n        ;\n      }\n\n      ;\n      const cartQtyd = copyCartd.reduce((acc, value) => acc + value.qty, 0);\n      return { ...state,\n        loading: false,\n        error: true,\n        cart: copyCartd,\n        cartCounter: cartQtyd\n      };\n\n    case Actions.SHOW_CART:\n      console.log(`Show cart: ${action.option}`);\n      return { ...state,\n        showCart: action.option\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default productsListReducer;","map":{"version":3,"sources":["/home/jaume/src/Projects/cart-fe/src/store/modules/products/reducer.ts"],"names":["initialState","Actions","productsListReducer","state","action","console","log","type","FETCH_PRODUCTSLIST_REQUEST","loading","error","FETCH_PRODUCTSLIST_SUCCESS","data","elements","FETCH_PRODUCTSLIST_FAILURE","INCREMENT_COUNTER","copyCarti","cart","ii","findIndex","e","id","push","qty","name","customerPrice","cost","cartQty","reduce","acc","value","cartCounter","DECREMENT_COUNTER","copyCartd","di","cartQtyd","SHOW_CART","option","showCart"],"mappings":"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","sourcesContent":["import {ProductsListDomain, initialState} from './model';\nimport * as Actions from './actions';\n\nconst productsListReducer = (state: ProductsListDomain = initialState, action: Actions.ProductsListAction) => {\n  console.log(`Reducer`);\n  console.log(action.type);\n  switch (action.type) {\n\n    case Actions.FETCH_PRODUCTSLIST_REQUEST:\n      console.log(`Request triggered`);\n      return { ...state, loading: true, error: false };\n\n    case Actions.FETCH_PRODUCTSLIST_SUCCESS:\n      console.log(`Received data: ${action.data}`);\n      return { ...state, loading: false, error: false, elements: action.data };\n\n    case Actions.FETCH_PRODUCTSLIST_FAILURE:\n      return { ...state, loading: false, error: true };\n\n    case Actions.INCREMENT_COUNTER:\n      let copyCarti = state.cart;\n      console.log(copyCarti);\n      const ii = copyCarti.findIndex( e => e.id === action.id);\n      if(ii === -1 ){\n        copyCarti.push({\n          id : action.id,\n          qty : 1,\n          name : action.name,\n          customerPrice : action.customerPrice,\n          cost : action.cost\n        });\n      } else {\n        copyCarti[ii].qty = copyCarti[ii].qty + 1;\n      };\n      console.log(copyCarti);\n      const cartQty = copyCarti.reduce( (acc, value) => acc + value.qty , 0);\n      return { ...state, loading: false, error: true, cart : copyCarti, cartCounter: cartQty };\n\n    case Actions.DECREMENT_COUNTER:\n      let copyCartd = state.cart;\n      const di = copyCartd.findIndex( e => e.id === action.id);\n      if(di === -1 ){\n        \n      } else {\n        if(copyCartd[di].qty > 0){\n          copyCartd[di].qty = copyCartd[di].qty - 1;\n        };\n      };\n      const cartQtyd = copyCartd.reduce( (acc, value) => acc + value.qty , 0);\n      return { ...state, loading: false, error: true, cart : copyCartd, cartCounter: cartQtyd };\n\n    case Actions.SHOW_CART:\n      console.log(`Show cart: ${action.option}`);\n      return { ...state, showCart: action.option };\n\n    default:\n      return state;\n  }\n};\n\nexport default productsListReducer;\n"]},"metadata":{},"sourceType":"module"}